# {{ ansible_managed }}

# This sysctl enables overcommitting memory.
# This is useful for Cassandra, because the task JVMs combined with the Cassandra JVM
# itself will try to allocate a lot of memory, even if they don't use it.

vm.overcommit_memory = 1

# These options are common settings from C*
vm.max_map_count = 1048575
net.ipv4.tcp_keepalive_time=300
net.core.rmem_max = 16777216
net.core.wmem_max = 16777216
net.core.rmem_default = 16777216
net.core.wmem_default = 16777216
net.core.optmem_max = 40960
net.ipv4.tcp_rmem = 4096 87380 16777216
net.ipv4.tcp_wmem = 4096 65536 16777216
